<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>5. 타이머 함수</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
      }
      .section {
        margin: 30px 0;
        padding: 20px;
        background: #f5f5f5;
        border-radius: 5px;
      }
      button {
        padding: 10px 20px;
        margin: 5px;
        cursor: pointer;
        background: #009688;
        color: white;
        border: none;
        border-radius: 5px;
      }
      button:hover {
        background: #00796b;
      }
      button:disabled {
        background: #ccc;
        cursor: not-allowed;
      }
      .timer-display {
        font-size: 48px;
        text-align: center;
        padding: 30px;
        background: white;
        border-radius: 5px;
        margin: 20px 0;
        font-weight: bold;
        color: #009688;
      }
      .message-box {
        padding: 15px;
        margin: 10px 0;
        background: white;
        border-radius: 5px;
        min-height: 50px;
      }
      .notification {
        padding: 10px;
        margin: 5px 0;
        background: #4caf50;
        color: white;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <h1>5. 타이머 함수 (Timer Functions)</h1>

    <div class="section">
      <h2>setTimeout - 일정 시간 후 한 번 실행</h2>
      <button onclick="testSetTimeout()">3초 후 메시지 표시</button>
      <div id="setTimeoutResult" class="message-box"></div>
    </div>

    <div class="section">
      <h2>setInterval - 일정 시간마다 반복 실행</h2>
      <div class="timer-display" id="timer">0</div>
      <button onclick="startTimer()">타이머 시작</button>
      <button onclick="stopTimer()">타이머 중지</button>
      <button onclick="resetTimer()">리셋</button>
    </div>

    <div class="section">
      <h2>타이머와 함께 동적 콘텐츠 생성</h2>
      <button onclick="startNotifications()">알림 시작</button>
      <button onclick="stopNotifications()">알림 중지</button>
      <div id="notificationContainer"></div>
    </div>

    <script>
      let timerInterval = null;
      let timerCount = 0;
      let notificationInterval = null;

      // setTimeout 예제
      function testSetTimeout() {
        const result = document.querySelector("#setTimeoutResult");
        result.innerHTML = "3초를 기다리는 중...";

        setTimeout(() => {
          result.innerHTML =
            '<strong style="color: #4CAF50;">3초가 지났습니다! 메시지가 표시되었습니다.</strong>';
        }, 3000);
      }

      // setInterval 예제
      function startTimer() {
        if (timerInterval) return; // 이미 실행 중이면 무시

        timerInterval = setInterval(() => {
          timerCount++;
          document.querySelector("#timer").textContent = timerCount;
        }, 1000);
      }

      function stopTimer() {
        if (timerInterval) {
          clearInterval(timerInterval);
          timerInterval = null;
        }
      }

      function resetTimer() {
        stopTimer();
        timerCount = 0;
        document.getElementById("timer").textContent = 0;
      }

      // 동적 콘텐츠 생성 예제
      function startNotifications() {
        if (notificationInterval) return; // 이미 실행 중이면 무시

        notificationInterval = setInterval(() => {
          const container = document.querySelector("#notificationContainer");
          const notification = document.createElement("div");
          notification.className = "notification";
          notification.textContent = `알림 ${new Date().toLocaleTimeString()}`;

          container.prepend(notification);

          // 5초 후 자동으로 제거
          setTimeout(() => {
            notification.remove();
          }, 5000);
        }, 2000);
      }

      function stopNotifications() {
        if (notificationInterval) {
          clearInterval(notificationInterval);
          notificationInterval = null;
        }
      }
    </script>
  </body>
</html>
